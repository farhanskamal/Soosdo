<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login System Flowboard ‚Äî Replica + Editor</title>
<style>
  :root{
    --bg:#f6f7f8;
    --muted:#e9e9ea;
    --accent:#fbc14b;
    --card:#fffff6;
    --dark:#0b0b0d;
    --glass: rgba(255,255,255,0.85);
    --neon: #ecff81;
    --neon-2: #ffd2f0;
    --shadow: 0 8px 18px rgba(16,20,30,0.08);
    font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  }

  html,body{height:100%; margin:0; background:linear-gradient(180deg,var(--bg),#f0f1f3) fixed;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  .app {
    height:100vh;
    display:grid;
    grid-template-columns: 260px 1fr 360px;
    gap:20px;
    padding:26px;
    box-sizing:border-box;
  }

  /* Sidebar */
  .sidebar {
    background:linear-gradient(180deg,#ffffff,#fbfbfb);
    border-radius:18px;
    padding:18px;
    box-shadow:var(--shadow);
    display:flex;
    flex-direction:column;
    gap:14px;
  }
  .logo {
    display:flex;align-items:center;gap:10px;
  }
  .logo .badge { width:42px;height:42px;border-radius:10px;background:linear-gradient(135deg,#ffd66a,#ffb86a);display:flex;align-items:center;justify-content:center;font-weight:700;color:#1b1b1b; box-shadow:0 6px 16px rgba(0,0,0,0.06);}
  .logo h3 { margin:0; font-size:16px; letter-spacing:0.6px; color:var(--dark) }
  .sidebar .menu {display:flex; gap:10px; flex-direction:column; font-size:14px}
  .menu button{ border:0;background:transparent; text-align:left; padding:8px;border-radius:8px; cursor:pointer;}
  .menu button:hover{background:#f2f2f2}
  .boards-list{ margin-top:6px; padding:6px; background:transparent; border-radius:10px; overflow:auto; flex:1}
  .board-item{ padding:8px 10px; border-radius:8px; color:#333; font-weight:600; display:block;}
  .board-item.active{ background:linear-gradient(90deg,#ffd6a6,#ffd0a6); color:#2b2b2b; }

  /* Canvas / center area */
  .canvas-wrap {
    position:relative;
    border-radius:20px;
    overflow:hidden;
    background:
      radial-gradient(circle at 10% 10%, rgba(0,0,0,0.02) 0px, transparent 2px),
      radial-gradient(circle at 40% 30%, rgba(0,0,0,0.02) 0px, transparent 2px);
    padding:18px;
    box-shadow:var(--shadow);
  }
  .topbar {
    display:flex;align-items:center; gap:12px; margin-bottom:10px;
  }
  .start-pill {
    background:linear-gradient(180deg,#baf17c,#9deb5e);
    border-radius:40px;
    padding:12px 22px;
    font-weight:800; letter-spacing:1px;
    display:inline-block;box-shadow:0 6px 18px rgba(34,60,12,0.08);
  }

  /* board area */
  .board {
    position:relative;
    height:calc(100vh - 160px);
    border-radius:14px;
    background: repeating-linear-gradient(45deg, rgba(0,0,0,0.02) 0px, rgba(0,0,0,0.02) 1px, transparent 1px, transparent 12px);
    padding:30px;
    overflow:auto;
  }

  /* Block styles (mimic screenshot neon rounded boxes) */
  .block {
    min-width:160px;
    max-width:320px;
    padding:12px 14px;
    border-radius:16px;
    position:absolute;
    cursor:grab;
    user-select:none;
    box-shadow: 0 8px 20px rgba(14,20,40,0.06);
    transition: transform .12s ease;
  }
  .block:active{ cursor:grabbing; transform:scale(0.995); }
  .block .title { font-weight:800; font-family: monospace; letter-spacing:0.8px; }
  .block .body { margin-top:8px; font-size:13px; font-family: monospace; white-space:pre-wrap; }

  /* color variants */
  .block.neon { background:linear-gradient(180deg,var(--neon),#f4ff9f); border:4px solid rgba(22,22,22,0.03); color:#111; }
  .block.warn { background:linear-gradient(180deg,#ffd8a6,#ffefc7); color:#222; }
  .block.pink { background:linear-gradient(180deg,#f6d8ff,#ffdafe); color:#27122a; }
  .block.purple { background:linear-gradient(180deg,#ffd7ff,#e9c9ff); color:#2b1430; }

  /* small controls under canvas */
  .canvas-controls {
    margin-top:8px; display:flex; gap:8px; align-items:center;
  }
  .btn { padding:8px 12px; border-radius:999px; border:0; background:#fff; box-shadow:0 6px 12px rgba(20,20,40,0.04); cursor:pointer; }
  .btn.primary { background:var(--accent); color:#292727; font-weight:700; }
  .mode-indicator{ padding:6px 10px; border-radius:8px; background:#fff; font-size:13px; box-shadow:0 6px 18px rgba(0,0,0,0.04);}

  /* right chat panel */
  .panel {
    background:linear-gradient(180deg,#fff,#fcfcff);
    border-radius:18px;
    padding:18px;
    box-shadow:var(--shadow);
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  .panel .header { display:flex; align-items:center; gap:10px; justify-content:space-between }
  .user-pill { display:flex; gap:10px; align-items:center; }
  .user-pill img { width:36px; height:36px; border-radius:50%; }
  .task-list { background:#fff; padding:12px; border-radius:12px; box-shadow:inset 0 1px 0 rgba(0,0,0,0.02) }
  .task { display:flex; gap:8px; align-items:flex-start; margin-bottom:10px; }
  .task input[type=checkbox]{ transform:scale(1.2); margin-top:4px; }

  /* code snippet box */
  .snippet { background:#0b1220; color:#dfefff; border-radius:10px; padding:12px; font-family:monospace; font-size:13px; overflow:auto; }
  .copy-btn { border:0;background:transparent;color:var(--accent); font-weight:700; cursor:pointer; }

  /* small helpers */
  .hint { font-size:13px;color:#666; }

  /* contenteditable visual */
  [contenteditable]:focus { outline: 2px dashed rgba(30,140,255,0.12); box-shadow:0 6px 14px rgba(15,52,100,0.04); }

  /* svg overlay for connectors */
  svg.connections { position:absolute; inset:0; pointer-events:none; z-index:1; }

  /* small responsive */
  @media (max-width:1050px){
    .app { grid-template-columns: 1fr; grid-template-rows: auto 1fr auto; padding:14px; }
    .canvas-wrap { order:2 }
  }
</style>
</head>
<body>
  <div class="app">
    <!-- LEFT SIDEBAR -->
    <aside class="sidebar" aria-label="sidebar">
      <div class="logo">
        <div class="badge">S</div>
        <div>
          <h3>Login System</h3>
          <div style="font-size:12px;color:#666">Boards & flows</div>
        </div>
      </div>

      <div class="menu">
        <button id="new-board" class="btn">‚ûï New Board</button>
        <button id="search-board" class="btn">üîé Search Board</button>
      </div>

      <div class="boards-list" id="boardsList">
        <div class="board-item active">Login System</div>
        <div class="board-item">Movement</div>
        <div class="board-item">Damage Vs. Defense</div>
      </div>

      <div style="font-size:12px;color:#999; display:flex; gap:8px; align-items:center; justify-content:space-between">
        <div>v1.0 ‚Ä¢ Visual Editor</div>
        <div style="opacity:0.6">‚óè</div>
      </div>
    </aside>

    <!-- CENTER CANVAS -->
    <main class="canvas-wrap">
      <div class="topbar">
        <div class="start-pill">START ‚û§</div>
        <div class="hint">Drag blocks to rearrange ‚Ä¢ Double-click to edit ‚Ä¢ Connect mode to draw arrows</div>
      </div>

      <div class="board" id="board">
        <!-- svg connection layer -->
        <svg class="connections" id="svg"></svg>

        <!-- blocks: pre-populated to match screenshot layout -->
        <div class="block neon" data-id="b-username" style="left:180px; top:20px" tabindex="0">
          <div class="title" contenteditable="false">#username is</div>
          <div class="body" contenteditable="false">enter that set user var</div>
        </div>

        <div class="block warn" data-id="b-pass" style="left:220px; top:130px">
          <div class="title">password is</div>
          <div class="body">enter set # pass var</div>
        </div>

        <div class="block neon" data-id="b-check" style="left:110px; top:300px; min-width:220px">
          <div class="title">check both user and # pass var</div>
        </div>

        <div class="block purple" data-id="b-if" style="left:130px; top:400px">
          <div class="title">if user is true</div>
          <div class="body">‚Üí Activness is true</div>
        </div>

        <div class="block pink" data-id="b-else" style="left:110px; top:520px">
          <div class="title">Else not work</div>
        </div>
      </div>

      <!-- controls under canvas -->
      <div class="canvas-controls">
        <button class="btn primary" id="addBlockBtn">+ Add Block</button>
        <button class="btn" id="connectModeBtn">üîÅ Connect Mode: <span id="connectModeState">Off</span></button>
        <div class="mode-indicator" id="modeInfo">Mode: Move</div>
        <div style="flex:1"></div>
        <button class="btn" id="saveBtn">üíæ Save</button>
        <button class="btn" id="loadBtn">üîÅ Load</button>
      </div>
    </main>

    <!-- RIGHT PANEL -->
    <aside class="panel" id="panel">
      <div class="header">
        <div class="user-pill">
          <img src="https://i.pravatar.cc/64?img=32" alt="user"/>
          <div>
            <div style="font-weight:800">What tasks are needed to be done</div>
            <div style="font-size:12px;color:#666">Let me know if you want to clarify something</div>
          </div>
        </div>
        <div>
          <button class="btn" id="shareBtn">Share</button>
        </div>
      </div>

      <div class="task-list" id="taskList">
        <label class="task"><input type="checkbox" id="t1"/><div style="flex:1;margin-left:6px"><strong>User sign in</strong><div style="font-size:12px;color:#777">create sign-in flow</div></div></label>
        <label class="task"><input type="checkbox" id="t2"/><div style="flex:1;margin-left:6px"><strong>Check if input is correct/exists</strong></div></label>
        <label class="task"><input type="checkbox" id="t3"/><div style="flex:1;margin-left:6px"><strong>Give user a way to create an account</strong></div></label>
      </div>

      <div style="font-size:13px;color:#444">
        <div style="font-weight:700;margin-bottom:8px">Chat</div>
        <div style="font-size:13px;color:#666">I see you want to work on making a login System! I will help you by first generating a to-do list.</div>
      </div>

      <div class="snippet" id="codeSnippet">
<pre style="margin:0;font-family:monospace;font-size:12px;">
user = str(input("Username:"))
passw = input("Password:")
if user in data:
    setactive = True
else:
    pass
</pre>
      </div>

      <div style="display:flex; gap:8px;">
        <button class="btn" id="togglePanelBtn">Toggle Panel</button>
        <button class="btn copy-btn" id="copyCode">Copy</button>
      </div>
    </aside>
  </div>

<script>
/* Small interactive editor:
 - Drag / drop
 - Double click to toggle contenteditable
 - Add blocks
 - Connect mode: click source then target to draw arrow between centers via an SVG path
 - Save/load to localStorage
*/

const board = document.getElementById('board');
const svg = document.getElementById('svg');
const addBlockBtn = document.getElementById('addBlockBtn');
const connectBtn = document.getElementById('connectModeBtn');
const connectState = document.getElementById('connectModeState');
const modeInfo = document.getElementById('modeInfo');
const saveBtn = document.getElementById('saveBtn');
const loadBtn = document.getElementById('loadBtn');
const togglePanelBtn = document.getElementById('togglePanelBtn');
const copyCodeBtn = document.getElementById('copyCode');

let isConnecting = false;
let connectFrom = null;
let connections = []; // {from:id, to:id}
let blocks = Array.from(board.querySelectorAll('.block')).map(el => el.dataset.id);

/* Dragging */
let dragState = null;
board.addEventListener('pointerdown', (ev)=>{
  const t = ev.target.closest('.block');
  if(!t) return;
  // only left button
  if(ev.button !== 0) return;
  ev.preventDefault();
  const rect = board.getBoundingClientRect();
  const bRect = t.getBoundingClientRect();
  dragState = {
    el: t,
    startX: ev.clientX,
    startY: ev.clientY,
    origLeft: parseFloat(t.style.left || bRect.left - rect.left),
    origTop: parseFloat(t.style.top || bRect.top - rect.top),
  };
  t.setPointerCapture(ev.pointerId);
});

board.addEventListener('pointermove',(ev)=>{
  if(!dragState) return;
  ev.preventDefault();
  const dx = ev.clientX - dragState.startX;
  const dy = ev.clientY - dragState.startY;
  dragState.el.style.left = (dragState.origLeft + dx) + 'px';
  dragState.el.style.top = (dragState.origTop + dy) + 'px';
  updateConnections();
});

board.addEventListener('pointerup',(ev)=>{
  if(!dragState) return;
  try { dragState.el.releasePointerCapture(ev.pointerId); } catch(e){}
  dragState = null;
});

/* Double click to edit: toggle contenteditable on title/body */
board.addEventListener('dblclick', (ev)=>{
  const b = ev.target.closest('.block');
  if(!b) return;
  // toggle first editable element inside
  const elems = Array.from(b.querySelectorAll('.title,.body'));
  if(elems.length === 0) return;
  elems.forEach(el => el.setAttribute('contenteditable', 'true'));
  elems[0].focus();
});

/* leave edit on blur */
board.addEventListener('focusout', (ev)=>{
  const el = ev.target;
  if(el.matches('.title, .body')) {
    el.setAttribute('contenteditable', 'false');
  }
});

/* Add block */
let newIndex = 0;
addBlockBtn.addEventListener('click', ()=>{
  newIndex++;
  const id = 'new-' + Date.now() + '-' + newIndex;
  const el = document.createElement('div');
  el.className = 'block warn';
  el.dataset.id = id;
  el.style.left = '60px';
  el.style.top = '80px';
  el.innerHTML = `<div class="title">New Block</div><div class="body">Double click to edit</div>`;
  board.appendChild(el);
  blocks.push(id);
  updateConnections();
});

/* Connect mode */
connectBtn.addEventListener('click', ()=>{
  isConnecting = !isConnecting;
  connectState.textContent = isConnecting ? 'On' : 'Off';
  modeInfo.textContent = isConnecting ? 'Mode: Connect (click source then target)' : 'Mode: Move';
  if(isConnecting) {
    board.style.cursor = 'crosshair';
  } else {
    board.style.cursor = 'default';
    connectFrom = null;
  }
});

board.addEventListener('click', (ev)=>{
  if(!isConnecting) return;
  const b = ev.target.closest('.block');
  if(!b) return;
  const id = b.dataset.id;
  if(!connectFrom) {
    connectFrom = id;
    // highlight source briefly
    b.style.boxShadow = '0 10px 28px rgba(20,120,255,0.18)';
    setTimeout(()=> b.style.boxShadow = '', 2200);
  } else {
    if(connectFrom === id) { connectFrom = null; return; }
    // create connection
    connections.push({from: connectFrom, to: id});
    connectFrom = null;
    updateConnections();
  }
});

/* Draw connections as SVG paths between centers */
function updateConnections(){
  // collect positions
  const map = {};
  board.querySelectorAll('.block').forEach(b=>{
    const id = b.dataset.id;
    const r = b.getBoundingClientRect();
    const boardRect = board.getBoundingClientRect();
    const cx = r.left - boardRect.left + r.width/2;
    const cy = r.top - boardRect.top + r.height/2;
    map[id] = {cx, cy, el: b};
  });

  // clear svg
  while(svg.firstChild) svg.removeChild(svg.firstChild);

  connections.forEach((c, i)=>{
    const a = map[c.from], b = map[c.to];
    if(!a || !b) return;
    const path = document.createElementNS("http://www.w3.org/2000/svg","path");
    const dx = Math.abs(b.cx - a.cx);
    const dy = Math.abs(b.cy - a.cy);
    const cp1x = a.cx + dx*0.3;
    const cp1y = a.cy;
    const cp2x = b.cx - dx*0.3;
    const cp2y = b.cy;
    const d = `M ${a.cx} ${a.cy} C ${cp1x} ${cp1y} ${cp2x} ${cp2y} ${b.cx} ${b.cy}`;
    path.setAttribute('d', d);
    path.setAttribute('stroke', 'rgba(30,60,120,0.65)');
    path.setAttribute('fill','none');
    path.setAttribute('stroke-width','3');
    path.setAttribute('marker-end','url(#arrowHead)');
    svg.appendChild(path);
  });

  // marker defs
  if(!svg.querySelector('marker')){
    const defs = document.createElementNS("http://www.w3.org/2000/svg","defs");
    defs.innerHTML = `<marker id="arrowHead" markerWidth="10" markerHeight="10" refX="6" refY="5" orient="auto">
      <path d="M0,0 L10,5 L0,10 z" fill="rgba(30,60,120,0.85)"></path>
    </marker>`;
    svg.appendChild(defs);
  }
}

/* Save/load (localStorage) */
saveBtn.addEventListener('click', ()=>{
  const state = {
    blocks: [],
    connections: connections
  };
  board.querySelectorAll('.block').forEach(b=>{
    state.blocks.push({
      id: b.dataset.id,
      left: b.style.left,
      top: b.style.top,
      className: b.className,
      html: b.innerHTML
    });
  });
  localStorage.setItem('flowboard-state', JSON.stringify(state));
  alert('Saved to localStorage');
});
loadBtn.addEventListener('click', ()=>{
  const raw = localStorage.getItem('flowboard-state');
  if(!raw) { alert('No saved state'); return; }
  try {
    const state = JSON.parse(raw);
    // clear blocks
    board.querySelectorAll('.block').forEach(n=>n.remove());
    state.blocks.forEach(b=>{
      const el = document.createElement('div');
      el.className = b.className;
      el.dataset.id = b.id;
      el.style.left = b.left;
      el.style.top = b.top;
      el.innerHTML = b.html;
      board.appendChild(el);
    });
    connections = state.connections || [];
    updateConnections();
  } catch(e){ console.error(e); alert('Failed to load'); }
});

/* Copy snippet */
copyCodeBtn.addEventListener('click', ()=>{
  const code = document.getElementById('codeSnippet').innerText;
  navigator.clipboard?.writeText(code).then(()=> alert('Copied!'), ()=> alert('Copy failed'));
});

/* Toggle panel */
togglePanelBtn.addEventListener('click', ()=>{
  const panel = document.getElementById('panel');
  panel.style.display = panel.style.display === 'none' ? 'flex' : 'none';
});

/* share ‚Äî simple demo */
document.getElementById('shareBtn').addEventListener('click', ()=>{
  alert('Share link created (demo).');
});

/* update connections on resize and on initial load */
window.addEventListener('resize', updateConnections);
updateConnections();

/* small UX - allow deleting connection by right click on path */
svg.addEventListener('contextmenu', (ev)=>{
  ev.preventDefault();
  // find nearest path
  const paths = Array.from(svg.querySelectorAll('path'));
  if(paths.length ===0) return;
  // on right click, just clear connections (simple)
  if(confirm('Clear all connections?')){ connections = []; updateConnections(); }
});
</script>
</body>
</html>
